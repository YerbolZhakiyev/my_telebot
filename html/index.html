<!doctype html>
<html>
<head>
<meta charset="UTF-8" />	
<link rel="stylesheet" href="style.css" type="text/css">
<title>Таблица заказов</title>
</head>
<body>
<div class="container">
  <h1 style="color:whitesmoke;">Таблица заказов</h1> 
  <table id = "table"></table>
</div>
  <script>
    function createTable(data) {
      console.log(Object.keys(data[0]))
      let table = document.getElementById("table")
      let tableRow = document.createElement('tr');
      for ( let tableHeader in data[0]) {
        let tableRowHeader = document.createElement('th');
        console.log(tableHeader)
        tableRowHeader.textContent = tableHeader;
        tableRow.appendChild(tableRowHeader)
      }
      table.appendChild(tableRow)

      for ( let tableElement of Object.values(data)) {
        let tableElementRow = document.createElement('tr');
        for ( let value in tableElement) {
          let tableData = document.createElement('td');
          console.log(tableData)
          tableData.textContent = tableElement[value];
          tableElementRow.appendChild(tableData)
        }
        table.appendChild(tableElementRow)
      }
    }  
    window.onload = event => {
      fetch('/api/orders')
      .then( response => response.json())
      .then( jsonObj => createTable(jsonObj.data))
      .catch( error => console.error(error.message))
    }
  </script>
</body>
</html>