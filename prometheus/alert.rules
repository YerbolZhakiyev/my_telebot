groups:
- name: nginx-alerts
  rules:
  - alert: nginx-status-code
    expr: 'contains(container, "nginx") and (contains(log, " 500 ") or contains(log, " 502 ") or contains(log, " 503 ") or contains(log, " 504 "))'
    for: 1m
    annotations:
      summary: "NGINX status code alert"
      description: "{{ $value }} status code detected in container {{ $labels.container }} on pod {{ $labels.pod }}. Full log message: {{ $value }}"
      telegram_message: "{{ $value }}"
    labels:
      severity: warning
